---
# Slurm cluster with all supported OS distributions and versions.
# Note that CentOS 8 has been discontinued and support has been removed.

StackName: slurmallos

slurm:
  # InstanceConfig:
  # Configure the instances used by the cluster
  # A partition will be created for each combination of Base OS, Architecture, and Spot
  InstanceConfig:
    UseSpot: true
    DefaultPartition: CentOS_7_x86_64_spot
    NodesPerInstanceType: 10
    BaseOsArchitecture:
      AlmaLinux: {8: [x86_64, arm64]}
      Amazon: {2: [x86_64, arm64]}
      CentOS:
        7: [x86_64]
      RedHat:
        7: [x86_64]
        8: [x86_64, arm64]
      Rocky: {8: [x86_64, arm64]}
    Include:
      MaxSizeOnly: false
      InstanceFamilies:
        - t3
        - t4g
      InstanceTypes: []
    Exclude:
      InstanceFamilies: []
      InstanceTypes:
        - '.*\.metal'

  # Use defaults from schema
  SlurmCtl: {}
  storage: {'efs': {}}
